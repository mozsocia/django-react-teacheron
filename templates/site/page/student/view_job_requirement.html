{% extends 'site/layouts/base.html' %}

{% block title %}Job Requirement Details{% endblock %}


{% block content %}
<div class="container section-form">

  <h1 class="text-xl font-bold mb-6">Job Requirement Details</h1>
  <div class="detail-section">


    <div class="detail-item">
      <div class="detail-item-title">Location :</div>
      <div class="detail-item-p">
        <p>{{ job_req.location }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Phone :</div>
      <div class="detail-item-p">
        <p>{{ job_req.phone }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Details :</div>
      <div class="detail-item-p">
        <p>{{ job_req.details }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Subjects :</div>
      <div class="detail-item-p">
        <p>{{ job_req.subjects }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Level :</div>
      <div class="detail-item-p">
        <p>{{ job_req.get_level_display }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">I Want :</div>
      <div class="detail-item-p">
        <p>{{ job_req.get_i_want_display }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Meeting :</div>
      <div class="detail-item-p">
        <p>{{ job_req.get_meeting_display }}</p>
      </div>
    </div>


    <div class="detail-item">
      <div class="detail-item-title">How Much Travel :</div>
      <div class="detail-item-p">
        <p>{{ job_req.how_much_travel }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Budget :</div>
      <div class="detail-item-p">
        <p>{{ job_req.budget }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Gender Preference :</div>
      <div class="detail-item-p">
        <p>{{ job_req.get_gender_preference_display }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Tutors Wanted :</div>
      <div class="detail-item-p">
        <p>{{ job_req.get_tutors_wanted_display }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Need Someone :</div>
      <div class="detail-item-p">
        <p>{{ job_req.get_need_someone_display }}</p>
      </div>
    </div>
    <div class="detail-item">
      <div class="detail-item-title">Communication Language :</div>
      <div class="detail-item-p">
        <p>{{ job_req.communication_language }}</p>
      </div>
    </div>
    
    <div class="detail-item">
      <div class="detail-item-title">Uploaded File :</div>
      <div class="detail-item-p">
        <p>{{ job_req.uploaded_file }}</p>
      </div>
    </div>

    <div class="detail-item">
      <a href="{% url 'edit_job_requirement' pk=job_req.pk %}" class="btn btn-primary">Edit</a>
      <a href="{% url 'delete_job_requirement' pk=job_req.pk %}" class="btn btn-error mx-2">Delete</a>
    
    </div>

    <br>

    <br>

<h2 class="text-2xl font-semibold mb-4">Applications ({{ applications|length }})</h2>
{% for application in applications %}
<div class="bg-white rounded-lg shadow-md p-6 mb-4">
  <div class="flex items-center mb-4">
    <!-- <img src="{{ application.teacher.profile_picture.url }}" alt="{{ application.teacher.full_name }}" class="w-16 h-16 rounded-full mr-4"> -->
    <div>
      <h3 class="text-xl font-semibold"><a href="{% url 'teacher_detail' teacher_id=application.teacher.pk %}">{{ application.teacher.user.name }}</a> </h3>
      <p class="text-gray-600">{{ application.teacher.get_gender_display }} |Location: {{ application.teacher.location }}</p>
    </div>
  </div>
  <p class="text-gray-700 mb-4">{{ application.cover_letter }}</p>
  <div class="flex justify-between items-center">
    <div>
      <strong>Status:</strong>
      {% if application.status == 'pending' %}
        <span class="bg-yellow-200 text-yellow-800 px-2 py-1 rounded">Pending</span>
      {% elif application.status == 'accepted' %}
        <span class="bg-green-200 text-green-800 px-2 py-1 rounded">Accepted</span>
      {% else %}
        <span class="bg-red-200 text-red-800 px-2 py-1 rounded">Rejected</span>
      {% endif %}
    </div>
    <div class="space-x-2">
      <a href="" class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded text-sm">Accept</a>
      <a href="" class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded text-sm">Reject</a>
    </div>
  </div>
</div>
{% empty %}
<div class="bg-white rounded-lg shadow-md p-6 text-center">
  <p class="text-gray-600">No applications found for this job yet.</p>
</div>
{% endfor %}
  </div>

</div>

{% endblock %}